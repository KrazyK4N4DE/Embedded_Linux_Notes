# Makefile

## Makefile规则

### 基本规则

> 目标文件 : 依赖文件1 依赖文件2 ...  
> [TAB]命令

当目标文件不存在，或依赖文件的**修改时间**比目标文件新时，执行命令。

### 创建Makefile

1. 在源文件所在目录创建文件，名为 `Makefile`。
2. 在里面写规则。

### 使用Makefile

> make [目标名]

若无目标名，则默认第一个目标。

---

## Makefile语法

### 可以使用通配符

- `$@`：所有目标文件
- `$<`：第一个依赖文件
- `$^`：所有依赖文件
- `$?`：所有更新过的依赖文件

### 假想目标 `.PHONY`

> .PHONY : 目标文件

目的：不用判断目标文件是否存在，就可以执行命令。

### 变量

- `:=`：即时变量，在定义时即确定
- `=`：延时变量，到使用到时才确定
- `?=`：延时变量，如果是**第一次**定义才起效，否则忽略这句
- `+=`：附加，它是什么变量取决于前面的定义
